<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Панель администратора</title>
</head>
<body style="background: #f4f4f4; padding: 20px;">
    <h1>Управление системой (Админ-панель)</h1>
    <div id="admin-content">Проверка прав...</div>

    <script>
        async function loadAdminData() {
            const token = localStorage.getItem('access_token');
            
            // Если токена нет совсем - 401
            if (!token) { window.location.href = '/login'; return; }

            const response = await fetch('/api/admin-data', {
                headers: { 'Authorization': `Bearer ${token}` }
            });

            if (response.status === 401) {
                window.location.href = '/login';
            } else if (response.status === 403) {
                // Если прав нет - показываем ошибку 403
                document.body.innerHTML = '<h1>403 Доступ запрещен</h1><p>У вас нет прав админа.</p><a href="/products">Назад</a>';
            } else {
                const data = await response.json();
                document.getElementById('admin-content').innerHTML = `<p>${data.secret_info}</p>`;
            }
        }
        loadAdminData();
    </script>
</body>
</html>